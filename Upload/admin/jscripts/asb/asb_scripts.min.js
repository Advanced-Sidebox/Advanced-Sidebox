var ASB=(function(a){var current='';function init(){new Peeker($$(".replace_all"),$("replace_content"),/1/,true);new Peeker($$(".replace_all"),$("header_search"),/0/,true);new Peeker($$(".replace_all"),$("footer_search"),/0/,true);new Peeker($$(".eval"),$("template_row"),/0/,true);new Peeker($$(".eval"),$("header_search"),/0/,true);new Peeker($$(".eval"),$("footer_search"),/0/,true);new Peeker($$(".eval"),$("replace_all"),/0/,true);new Peeker($$(".eval"),$("replace_content"),/0/,true);if($('replace_all_yes').checked){$("header_search").hide();$("footer_search").hide();}else{$("replace_content").hide();}
if($('eval_yes').checked){$("header_search").hide();$("footer_search").hide();$("template_row").hide();$("replace_all").hide();$("replace_content").hide();}
observeInputs();$('filename').observe('blur',update);}
function update(event){if(this.value==current||this.value==''){return;}
current=this.value;$('hook_list').hide();$('template_list').hide();$('action_list').hide();var spinners=$$('div.ajax_spinners');for(x=0;x<spinners.length;++x){spinners[x].show();}
new Ajax.Request('index.php',{parameters:{module:'config-asb',action:'xmlhttp',mode:'analyze_script',filename:this.value},onSuccess:showResults});}
function showResults(response){var spinners=$$('div.ajax_spinners');for(x=0;x<spinners.length;++x){spinners[x].hide();}
if(!response.responseText){return;}
var info=response.responseText.evalJSON();if(info.hooks){$('hook_list').update(info.hooks);$('hook_list').show();}
if(info.templates){$('template_list').update(info.templates);$('template_list').show();}
if(info.actions){$('action_list').update(info.actions);$('action_list').show();}
observeInputs();}
function observeInputs(){if($('hook_selector')){$('hook_selector').observe('change',function(event){$('hook').value=this.value;});}
if($('template_selector')){$('template_selector').observe('change',function(event){$('template_name').value=this.value;});}
if($('action_selector')){$('action_selector').observe('change',function(event){$('action').value=this.value;});}}
function setCurrent(value){current=value||'';}
Event.observe(window,'load',init);a.scripts={setCurrent:setCurrent,};return a;})(ASB||{});