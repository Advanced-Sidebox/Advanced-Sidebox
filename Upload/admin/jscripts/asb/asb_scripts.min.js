var ASB=(function(a,$){var current='',lang={nothing_found:'nothing found',hooks:'hooks',actions:'actions',templates:'templates',};function init(){new Peeker($(".replace_all"),$("#replace_content"),/1/,true);new Peeker($(".replace_all"),$("#header_search"),/0/,true);new Peeker($(".replace_all"),$("#footer_search"),/0/,true);new Peeker($(".eval"),$("#template_row "),/0/,true);new Peeker($(".eval"),$("#header_search"),/0/,true);new Peeker($(".eval"),$("#footer_search"),/0/,true);new Peeker($(".eval"),$("#replace_all"),/0/,true);new Peeker($(".eval"),$("#replace_content"),/0/,true);if($('#replace_all_yes').prop("checked")){$("#header_search").hide();$("#footer_search").hide();}else{$("#replace_content").hide();}
if($('#eval_yes').prop("checked")){$("#header_search").hide();$("#footer_search").hide();$("#template_row").hide();$("#replace_all").hide();$("#replace_content").hide();}
observeInputs();$('#filename').blur(update);}
function update(event){if(this.value==current||this.value==''){return;}
current=this.value;$('#hook_list').hide();$('#template_list').hide();$('#action_list').hide();$('div.ajax_spinners').show();$.ajax({type:'post',url:'index.php',data:{module:'config-asb',action:'xmlhttp',mode:'analyze_script',filename:this.value,selected:{hook:$('#hook').val(),template:$('#template_name').val(),action:$('#action').val(),},},success:showResults,error:function(jqXHR,textStatus,errorThrown){alert('error'+"\n\n"+
textStatus+"\n\n"+
errorThrown);},});}
function showResults(info){$('div.ajax_spinners').hide();if(!info){return;}
$.each(['hook','template','action'],function(i,k){var ks=k+'s',html='<span style="font-style: italic;">'+lang.nothing_found.replace('{1}',lang[ks])+'</span>';if(info[ks]){html=info[ks];}
$('#'+k+'_list').html(html).show();});observeInputs();}
function observeInputs(){if($('#hook_selector')){$('#hook_selector').change(function(event){var val=this.value;if(val==0){val='';}
$('#hook').val(val);});}
if($('#template_selector')){$('#template_selector').change(function(event){var val=this.value;if(val==0){val='';}
$('#template_name').val(val);});}
if($('#action_selector')){$('#action_selector').change(function(event){var val=this.value;if(val==0){val='';}
$('#action').val(val);});}}
function setup(value,language){current=value||'';$.extend(lang,language||{});}
$(init);a.scripts={setup:setup,};return a;})(ASB||{},jQuery);