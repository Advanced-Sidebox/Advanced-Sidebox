var ASB=(function(a,$){function Slideshow(container,options){if(!$(container)){return;}
this.options={rate:10,shuffle:false,fadeRate:1,size:100,};$.extend(this.options,options||{});this.container=$("#"+container);this.container.css({width:this.options.size+'px',height:this.options.size+'px',marginLeft:'auto',marginRight:'auto',position:'relative',});if(!this.options.images||this.options.images.length==0){return;}
this.current=0;if(this.options.shuffle){this.options.images.sort(function(){return 0.5-Math.random();});}
this.mainImage=$('<img/>',{src:this.getCurrentImage(),}).css({display:'none',position:'absolute',width:this.options.size+'px',left:'0px',top:'0px',});this.container.append(this.mainImage);this.bufferImage=this.mainImage.clone();this.container.append(this.bufferImage);this.cloneWidth=this.cloneHeight=0;this.showCurrent();$($.proxy(this.run,this));$(window).unload($.proxy(this.stop,this));}
function run(){this.timeOutId=setTimeout($.proxy(this.showNext,this),this.options.rate*1000);}
function stop(){clearTimeout(this.timeOutId);}
function getCurrentImage(){return this.options.folder?this.options.folder+'/'+this.options.images[this.current]:this.options.images[this.current];}
function nextImage(){this.bufferImage.prop("title",this.mainImage.prop("title"));this.bufferImage.prop("alt",this.mainImage.prop("alt"));this.bufferImage.prop("src",this.mainImage.prop("src"));this.resizeImage(this.bufferImage).show();this.mainImage.hide();this.current++;if(this.options.images.length<=this.current){this.current=0;}}
function showCurrent(){this.mainImage.prop("title",this.options.images[this.current]);this.mainImage.prop("alt",this.options.images[this.current]);this.mainImage.prop("src",this.getCurrentImage());this.clone=$('<img/>',{src:this.mainImage.prop("src"),}).css({position:'absolute',display:'block',});$('body').append(this.clone);this.clone.load($.proxy(this.resize,this)).each(function(){if(this.complete){$(this).load();}});$(this.mainImage).fadeIn(this.options.fadeRate);if(this.running){$(this.bufferImage).fadeOut(this.options.fadeRate);}
this.running=true;}
function resize(e){var height=this.clone.height(),width=this.clone.width(),ratio;if(height>width){ratio=height/width;this.cloneWidth=parseInt(this.options.size/ratio);this.cloneHeight=this.options.size;}else if(width>height){ratio=width/height;this.cloneWidth=this.options.size;this.cloneHeight=parseInt(this.options.size/ratio);}else{this.cloneHeight=this.cloneWidth=this.options.size;}
this.clone.remove();this.resizeImage(this.mainImage);}
function resizeImage(el){el.css({height:this.cloneHeight+'px',width:this.cloneWidth+'px',left:parseInt((this.options.size/2)-(this.cloneWidth/2))+'px',top:parseInt((this.options.size/2)-(this.cloneHeight/2))+'px',});return el;}
function showNext(){if(this.container.width()>0){this.nextImage();this.showCurrent();}
this.run();}
Slideshow.prototype={run:run,stop:stop,showCurrent:showCurrent,getCurrentImage:getCurrentImage,nextImage:nextImage,showNext:showNext,resize:resize,resizeImage:resizeImage,};a.modules=$.extend({Slideshow:Slideshow,},a.modules||{});return a;})(ASB||{},jQuery);